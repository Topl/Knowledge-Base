"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[211],{9141:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var t=n(4848),l=n(8453);const a={id:"install-k8s",title:"Run with Helm/Kubernetes",tags:["Install","Getting started","sdkman","scala","jar"]},i=void 0,r={id:"Developers/Node Setup/install-k8s",title:"Run with Helm/Kubernetes",description:"Quickstart",source:"@site/docs/Developers/03-Node Setup/helm-kubernetes.md",sourceDirName:"Developers/03-Node Setup",slug:"/Developers/Node Setup/install-k8s",permalink:"/Developers/Node Setup/install-k8s",draft:!1,unlisted:!1,editUrl:"https://github.com/Topl/knowledge-base/edit/main/docs/Developers/03-Node Setup/helm-kubernetes.md",tags:[{label:"Install",permalink:"/tags/install"},{label:"Getting started",permalink:"/tags/getting-started"},{label:"sdkman",permalink:"/tags/sdkman"},{label:"scala",permalink:"/tags/scala"},{label:"jar",permalink:"/tags/jar"}],version:"current",frontMatter:{id:"install-k8s",title:"Run with Helm/Kubernetes",tags:["Install","Getting started","sdkman","scala","jar"]},sidebar:"developersSidebar",previous:{title:"Run with Docker",permalink:"/Developers/Node Setup/install-docker"},next:{title:"Getting Started",permalink:"/Developers/CLI/intro"}},o={},d=[{value:"Quickstart",id:"quickstart",level:2},{value:"Tools needed:",id:"tools-needed",level:3},{value:"Install K8s cluster",id:"install-k8s-cluster",level:2},{value:"Ubuntu",id:"ubuntu",level:3},{value:"Enable add ons",id:"enable-add-ons",level:4},{value:"Windows",id:"windows",level:3}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"quickstart",children:"Quickstart"}),"\n",(0,t.jsx)(s.h3,{id:"tools-needed",children:"Tools needed:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Docker"}),"\n",(0,t.jsx)(s.li,{children:"Kubernetes"}),"\n",(0,t.jsx)(s.li,{children:"Helm"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:"values.yaml",children:"args: ['--dataDir', '/mnt/bifrost/data', '--stakingDir', '/mnt/bifrost/staking']\n\nvolume:\n  mountDirectory: /mnt/bifrost\n\nhelm repo add topl https://topl.github.io/helm-charts\nhelm repo update\nhelm upgrade --install bifrost topl/bifrost -n bifrost --create-namespace -f ./values.yaml\n"})}),"\n",(0,t.jsx)(s.h2,{id:"install-k8s-cluster",children:"Install K8s cluster"}),"\n",(0,t.jsx)(s.h3,{id:"ubuntu",children:"Ubuntu"}),"\n",(0,t.jsx)(s.p,{children:"In this example, we will use microk8s. There are many others you can use, including Docker Desktop + K8s, Minikube, k3s, Kind, etc."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://microk8s.io/docs/getting-started",children:"https://microk8s.io/docs/getting-started"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo snap install microk8s --classic\n# Add user to group\nsudo usermod -a -G microk8s $USER\nsudo chown -f -R $USER ~/.kube\n"})}),"\n",(0,t.jsx)(s.h4,{id:"enable-add-ons",children:"Enable add ons"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"microk8s enable dns hostpath-storage\n"})}),"\n",(0,t.jsx)(s.h3,{id:"windows",children:"Windows"}),"\n",(0,t.jsxs)(s.p,{children:["Follow Docker Desktop installation instructions: \u200b ",(0,t.jsx)(s.a,{href:"https://www.docker.com/products/docker-desktop/",children:"https://www.docker.com/products/docker-desktop/"}),"\nI recommend using the WSL2 backend. Instructions are here: \u200b",(0,t.jsx)(s.a,{href:"https://docs.docker.com/desktop/windows/wsl/",children:"https://docs.docker.com/desktop/windows/wsl/"})]}),"\n",(0,t.jsx)(s.p,{children:"Once Docker Desktop is installed, k8s is as easy as clicking a button"}),"\n",(0,t.jsx)(s.p,{children:"Add an Alias"}),"\n",(0,t.jsx)(s.p,{children:"You may also want to create an alias so you don\u2019t have to type microk8s kubectl every time. A common way would be do"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"vim ~/.bash_aliases\n"})}),"\n",(0,t.jsx)(s.p,{children:"Add this line"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'alias k="microk8s kubectl"\nalias helm="microk8s helm"\n'})}),"\n",(0,t.jsx)(s.p,{children:"Reload the shell, and then you can run commands like"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"k get pods\n"})}),"\n",(0,t.jsx)(s.p,{children:"The rest of the guide assumes an alias. If you didn\u2019t add one, use the kubectl , microk8s kubectl, minikube kubectl, etc."}),"\n",(0,t.jsx)(s.p,{children:"Install Helm Chart"}),"\n",(0,t.jsx)(s.p,{children:"Add the Apparatus Helm repository"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"helm repo add topl https://topl.github.io/helm-charts\nhelm repo update\n"})}),"\n",(0,t.jsx)(s.p,{children:"Install the Bifrost helm chart"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"helm upgrade --install bifrost topl/bifrost -n bifrost --create-namespace\n"})}),"\n",(0,t.jsx)(s.p,{children:"You can pass values to the chart either by passing a values.yaml file, or individual values via the --set flag."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"helm upgrade --install bifrost topl/bifrost -n bifrost --create-namespace -f ./path/to/values.yaml\nhelm upgrade --install bifrost topl/bifrost --set volume.mountDirectory='/mnt/bifrost' -n bifrost --create-namespace\n"})}),"\n",(0,t.jsx)(s.p,{children:"Finally, check the pod to make sure it is running."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"k get pods -n bifrost\n\n# To get more detailed info if the pod did not start, run\nk describe pods -n bifrost\n"})}),"\n",(0,t.jsx)(s.p,{children:"You can view the logs by running:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"k logs statefulset/bifrost -n bifrost\n\n# Or individual pods:\nk logs bifrost-0 -n bifrost\n"})}),"\n",(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Find more information here! ",(0,t.jsx)(s.a,{href:"https://topl.github.io/Bifrost/",children:"Bifrost Documentation"})]})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>r});var t=n(6540);const l={},a=t.createContext(l);function i(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);