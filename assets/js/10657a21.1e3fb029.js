"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[7435],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(n),d=r,m=u["".concat(s,".").concat(d)]||u[d]||h[d]||o;return n?a.createElement(m,l(l({ref:t},p),{},{components:n})):a.createElement(m,l({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4644:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>p,toc:()=>u});var a=n(7462),r=(n(7294),n(3905)),o=n(5293),l=n(4890),i=n(1473);const s={id:"recover-wallet",title:"Wallet Recovery",slug:"recover-wallet"},c="Wallet Recovery",p={unversionedId:"Developers/Quickstart Tutorial/recover-wallet",id:"Developers/Quickstart Tutorial/recover-wallet",title:"Wallet Recovery",description:"In this tutorial, we learn how to recover the wallet after there was an",source:"@site/docs/Developers/02-Quickstart Tutorial/05-recover-wallet.md",sourceDirName:"Developers/02-Quickstart Tutorial",slug:"/Developers/Quickstart Tutorial/recover-wallet",permalink:"/Developers/Quickstart Tutorial/recover-wallet",draft:!1,editUrl:"https://github.com/Topl/knowledge-base/edit/main/docs/Developers/02-Quickstart Tutorial/05-recover-wallet.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"recover-wallet",title:"Wallet Recovery",slug:"recover-wallet"},sidebar:"developersSidebar",previous:{title:"Minting an Asset",permalink:"/Developers/Quickstart Tutorial/mint-asset"},next:{title:"Bare Metal",permalink:"/Developers/Node Setup/install-bare-metal"}},h={},u=[{value:"Diagnosing the Problem",id:"diagnosing-the-problem",level:2},{value:"Syncing the Wallet",id:"syncing-the-wallet",level:2},{value:"Listing Interactions",id:"listing-interactions",level:2},{value:"Setting the Current Interaction",id:"setting-the-current-interaction",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:u};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"wallet-recovery"},"Wallet Recovery"),(0,r.kt)("p",null,"In this tutorial, we learn how to recover the wallet after there was an\nerror submitting it. This happens for example if you try to submit a\ntransaction and it fails at broadcast time or at the node."),(0,r.kt)("p",null,"When this happens, the wallet might be in a state where the current interaction\nlocally is not the same as the current interaction on the node. ",(0,r.kt)("inlineCode",{parentName:"p"},"brambl-cli"),"\noffers several ways to diagnose and recover the wallet."),(0,r.kt)("h2",{id:"diagnosing-the-problem"},"Diagnosing the Problem"),(0,r.kt)("p",null,"The first step is to diagnose the problem. A symptom that your wallet is\nnot in sync with the node is that checking the balance on an address\ndoes not match the expected balance."),(0,r.kt)("p",null,"For example, if you check the balance of an address and it shows 0, but\nyou know that the address has funds, then the wallet is not in sync with\nthe node. This can happen because the lock template of that address is shared\nwith another wallet and the other wallet has already spent the funds. If this\nhappens, you can sync the wallet with the node using the ",(0,r.kt)("inlineCode",{parentName:"p"},"sync")," command.\nThe sync command will update the wallet with the current state of the node."),(0,r.kt)("p",null,"Another symptom is that you try to submit a transaction and it fails\nwith an error that no UTXOs are available. This can happen if you created a\ntransaction and never submitted it. What happened here, is that the wallet\nmoved to the next interaction internally, and thus is not checking the correct\naddress. You can check list of interactions using the ",(0,r.kt)("inlineCode",{parentName:"p"},"wallet list-interactions"),"\ncommand. You can then use the ",(0,r.kt)("inlineCode",{parentName:"p"},"wallet set-interaction")," command to set the\ncurrent interaction to the correct one."),(0,r.kt)("h2",{id:"syncing-the-wallet"},"Syncing the Wallet"),(0,r.kt)(o.ZP,{mdxType:"SyncWallet"}),(0,r.kt)("h2",{id:"listing-interactions"},"Listing Interactions"),(0,r.kt)(l.ZP,{mdxType:"ListInteractions"}),(0,r.kt)("p",null,"Using this feature you can get the addresses at each interaction and check\nif the address you are trying to use is the correct one."),(0,r.kt)("h2",{id:"setting-the-current-interaction"},"Setting the Current Interaction"),(0,r.kt)(i.ZP,{mdxType:"ResetInteraction"}),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Using these commands you can recover your wallet and continue using it."))}m.isMDXComponent=!0},4890:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(7462),r=(n(7294),n(3905));const o={toc:[]};function l(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Each time a transaction is created a new interaction is created. To list all the interactions of a given wallet for a given fellowship and template, use the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"brambl-cli wallet list-interactions --walletdb $WALLETDB --fellowship-name $FELLOWSHIP --template-name $TEMPLATE\n")),(0,r.kt)("p",null,"The result is given in the following format:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"<fellowship id> <template id> <interaction id> <address at the location>\n")))}l.isMDXComponent=!0},1473:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(7462),r=(n(7294),n(3905));const o={toc:[]};function l(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Each time a transaction is created a new interaction is created. Sometimes\nthe transaction might not be useful or might be invalid. In this case, the\ninteraction can be reset. This command will set the interaction to a given value."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"brambl-cli wallet set-interaction  --walletdb $WALLET_DB --from-fellowship $FELLOWSHIP --from-template $TEMPLATE --from-interaction $NEW_INTERACTION\n")))}l.isMDXComponent=!0},5293:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(7462),r=(n(7294),n(3905));const o={toc:[]};function l(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"To sync the wallet run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"brambl-cli wallet sync --template-name $LOCK_TEMPLATE_NAME --fellowship-name $FELLOWSHIP_NAME --walletdb $WALLET -n $NETWORK -h $HOST --port $PORT --keyfile $KEYFILE -w $PASSWORD\n")),(0,r.kt)("p",null,"This will sync the wallet for the fellowship ",(0,r.kt)("inlineCode",{parentName:"p"},"$FELLOWSHIP_NAME")," and template ",(0,r.kt)("inlineCode",{parentName:"p"},"$LOCK_TEMPLATE_NAME")," with the bifrost node running on ",(0,r.kt)("inlineCode",{parentName:"p"},"$HOST")," on port ",(0,r.kt)("inlineCode",{parentName:"p"},"$PORT"),". The keyfile ",(0,r.kt)("inlineCode",{parentName:"p"},"$KEYFILE")," is used to derive keys. The password for the wallet is ",(0,r.kt)("inlineCode",{parentName:"p"},"$PASSWORD"),". "),(0,r.kt)("p",null,"The procedure for the sync is the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"we first derive the next address for the fellowship and template"),(0,r.kt)("li",{parentName:"ul"},"we query the node to see if the UTXOs in that address are spent"),(0,r.kt)("li",{parentName:"ul"},"if the UTXOs are spent, then we derive the next address and repeat the process")))}l.isMDXComponent=!0}}]);